<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ô‡∏±‡∏Å‡∏õ‡∏£‡∏∏‡∏á‡∏™‡∏°‡∏Å‡∏≤‡∏£ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏¥‡πâ‡∏°‡∏ß‡∏≤‡∏á)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;600&display=swap');

        body {
            font-family: 'Kanit', sans-serif;
            background-color: #2c3e50;
            color: white;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            user-select: none;
        }

        h1 { margin-top: 20px; color: #f1c40f; }

        .game-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .target-box {
            font-size: 50px;
            background: #e74c3c;
            padding: 10px 40px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 30px;
            box-shadow: 0 5px 0 #c0392b;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        .equation-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 40px;
        }

        .slot {
            width: 80px;
            height: 80px;
            background-color: #ecf0f1;
            border: 4px dashed #95a5a6;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 32px;
            color: #2c3e50;
            font-weight: bold;
            transition: all 0.2s;
            cursor: pointer; /* ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏°‡∏∑‡∏≠‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏î‡∏ß‡∏≤‡∏á‡πÑ‡∏î‡πâ */
        }

        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ï‡∏≠‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡∏≠‡∏á */
        .slot.filled {
            border-style: solid;
            border-color: #2ecc71;
            background-color: #fff;
            box-shadow: 0 4px 0 #bdc3c7;
        }
        
        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ï‡∏≠‡∏ô‡πÄ‡∏≠‡∏≤‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ä‡∏µ‡πâ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏™‡πà‡πÅ‡∏•‡πâ‡∏ß (‡∏à‡∏∞‡∏•‡∏ö) */
        .slot.filled:hover {
            background-color: #ffcccc;
            border-color: #e74c3c;
        }

        .equals-sign { font-size: 40px; margin: 0 5px; }

        .options-area {
            background: white;
            padding: 20px;
            border-radius: 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            min-height: 80px;
        }

        .option-item {
            width: 60px;
            height: 60px;
            background: #3498db;
            color: white;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #2980b9;
            transition: transform 0.1s;
        }

        .option-item:active { transform: translateY(2px); box-shadow: none; }
        .option-item[data-type="operator"] { background: #9b59b6; box-shadow: 0 4px 0 #8e44ad; }

        /* --- Highlight ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å) --- */
        .option-item.selected {
            border: 4px solid #f1c40f; /* ‡∏Ç‡∏≠‡∏ö‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á */
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 10px 0 #f39c12;
            z-index: 10;
        }

        .hidden { visibility: hidden; }

        .btn-check {
            margin-top: 30px;
            padding: 15px 40px;
            font-size: 24px;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 0 #219150;
            font-family: 'Kanit', sans-serif;
        }
        .btn-check:active { transform: translateY(4px); box-shadow: none; }

        .score-board { font-size: 20px; margin-bottom: 10px; color: #ecf0f1; }
        .correct-bg { background-color: #27ae60 !important; color: white !important; }
        .wrong-bg { animation: shake 0.5s; background-color: #c0392b !important; color: white !important; }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); } 75% { transform: translateX(-10px); }
            50% { transform: translateX(10px); } 100% { transform: translateX(0); }
        }
    </style>
</head>
<body>

    <h1>üëÜ ‡∏à‡∏¥‡πâ‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏≤‡∏á‡∏™‡∏°‡∏Å‡∏≤‡∏£</h1>
    <div class="score-board">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></div>

    <div class="game-container">
        <div>‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</div>
        <div id="target-number" class="target-box">?</div>

        <div class="equation-area">
            <div class="slot" id="slot-1" onclick="handleSlotClick(this)"></div>
            <div class="slot" id="slot-op" onclick="handleSlotClick(this)"></div>
            <div class="slot" id="slot-2" onclick="handleSlotClick(this)"></div>
            <div class="equals-sign">=</div>
            <div id="target-display" style="font-size: 32px; font-weight: bold;">?</div>
        </div>

        <p>1. ‡∏à‡∏¥‡πâ‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á 2. ‡∏à‡∏¥‡πâ‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà</p>
        <div class="options-area" id="options-container">
            </div>

        <button class="btn-check" onclick="checkAnswer()">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‚úÖ</button>
    </div>

    <script>
        // --- Game Variables ---
        let currentTarget = 0;
        let score = 0;
        let selectedItem = null; // ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏¥‡πâ‡∏°‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏≠‡∏¢‡∏π‡πà

        function generateLevel() {
            // ‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°
            const num1 = Math.floor(Math.random() * 9) + 1; 
            const num2 = Math.floor(Math.random() * 9) + 1; 
            const operators = ['+', '-', '*']; 
            const selectedOp = operators[Math.floor(Math.random() * operators.length)];

            let result;
            if (selectedOp === '+') result = num1 + num2;
            else if (selectedOp === '-') result = num1 - num2;
            else if (selectedOp === '*') result = num1 * num2;

            if (result < 0) { generateLevel(); return; }

            currentTarget = result;
            document.getElementById('target-number').innerText = currentTarget;
            document.getElementById('target-display').innerText = currentTarget;
            
            clearSlots();
            selectedItem = null; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            let options = [];
            options.push({ val: num1, type: 'number' });
            options.push({ val: num2, type: 'number' });
            options.push({ val: selectedOp, type: 'operator' });
            options.push({ val: Math.floor(Math.random() * 9) + 1, type: 'number' });
            options.push({ val: Math.floor(Math.random() * 9) + 1, type: 'number' });
            const decoyOp = operators.filter(o => o !== selectedOp)[0];
            options.push({ val: decoyOp, type: 'operator' });
            options.sort(() => Math.random() - 0.5);

            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å Draggable ‡πÄ‡∏õ‡πá‡∏ô Clickable)
            options.forEach((item, index) => {
                const el = document.createElement('div');
                el.classList.add('option-item');
                el.innerText = item.val;
                el.id = 'opt-' + index;
                el.dataset.val = item.val;
                el.dataset.type = item.type;
                
                // Event: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                el.onclick = () => handleOptionClick(el);

                container.appendChild(el);
            });
        }

        // --- Logic: ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (Select) ---
        function handleOptionClick(el) {
            // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏¥‡∏° ‡πÉ‡∏´‡πâ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            if (selectedItem && selectedItem.id === el.id) {
                el.classList.remove('selected');
                selectedItem = null;
                return;
            }

            // ‡∏•‡∏ö Highlight ‡∏ï‡∏±‡∏ß‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            document.querySelectorAll('.option-item').forEach(i => i.classList.remove('selected'));

            // Highlight ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà
            el.classList.add('selected');
            
            // ‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ß‡∏≤‡∏á
            selectedItem = {
                id: el.id,
                val: el.dataset.val,
                type: el.dataset.type
            };
        }

        // --- Logic: ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡∏•‡∏á‡∏ä‡πà‡∏≠‡∏á (Place) ---
        function handleSlotClick(slot) {
            // ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ -> ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ß‡∏≤‡∏á
            if (selectedItem) {
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ß‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏´‡∏° (‡πÄ‡∏•‡∏Ç‡∏•‡∏á‡πÄ‡∏•‡∏Ç, ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏•‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢)
                let isValid = false;
                if (slot.id === 'slot-op' && selectedItem.type === 'operator') isValid = true;
                if ((slot.id === 'slot-1' || slot.id === 'slot-2') && selectedItem.type === 'number') isValid = true;

                if (isValid) {
                    // ‡∏ñ‡πâ‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô (Swap)
                    if (slot.classList.contains('filled')) {
                        returnItemToInventory(slot);
                    }

                    // ‡∏ß‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
                    slot.innerText = selectedItem.val;
                    slot.dataset.value = selectedItem.val;
                    slot.dataset.sourceId = selectedItem.id;
                    slot.classList.add('filled');

                    // ‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
                    const sourceEl = document.getElementById(selectedItem.id);
                    sourceEl.classList.add('hidden');
                    sourceEl.classList.remove('selected');

                    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                    selectedItem = null;
                } else {
                    // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡∏ß‡∏≤‡∏á‡∏ú‡∏¥‡∏î‡∏ä‡πà‡∏≠‡∏á (‡πÅ‡∏ö‡∏ö‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏•)
                    slot.classList.add('wrong-bg');
                    setTimeout(() => slot.classList.remove('wrong-bg'), 300);
                }
            } 
            // ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏ß‡πâ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏á -> ‡πÄ‡∏≠‡∏≤‡∏≠‡∏≠‡∏Å (Clear)
            else if (slot.classList.contains('filled')) {
                returnItemToInventory(slot);
            }
        }

        function returnItemToInventory(slot) {
            const sourceId = slot.dataset.sourceId;
            if (sourceId) {
                const sourceEl = document.getElementById(sourceId);
                if (sourceEl) {
                    sourceEl.classList.remove('hidden');
                    sourceEl.classList.remove('selected');
                }
            }
            // ‡∏•‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á
            slot.innerText = '';
            slot.classList.remove('filled', 'correct-bg', 'wrong-bg');
            delete slot.dataset.value;
            delete slot.dataset.sourceId;
        }

        function clearSlots() {
            ['slot-1', 'slot-op', 'slot-2'].forEach(id => {
                returnItemToInventory(document.getElementById(id));
            });
        }

        // --- ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ---
        function checkAnswer() {
            const v1 = document.getElementById('slot-1').dataset.value;
            const op = document.getElementById('slot-op').dataset.value;
            const v2 = document.getElementById('slot-2').dataset.value;

            if (!v1 || !op || !v2) {
                alert("‡∏à‡∏¥‡πâ‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö!");
                return;
            }

            let userResult = 0;
            const num1 = parseInt(v1);
            const num2 = parseInt(v2);

            if (op === '+') userResult = num1 + num2;
            else if (op === '-') userResult = num1 - num2;
            else if (op === '*') userResult = num1 * num2;

            if (userResult === currentTarget) {
                score += 10;
                document.getElementById('score').innerText = score;
                document.querySelectorAll('.slot').forEach(s => s.classList.add('correct-bg'));
                setTimeout(() => { 
                    alert("‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üéâ"); 
                    generateLevel(); 
                }, 500);
            } else {
                document.querySelectorAll('.slot').forEach(s => s.classList.add('wrong-bg'));
                setTimeout(() => { 
                    document.querySelectorAll('.slot').forEach(s => s.classList.remove('wrong-bg')); 
                }, 500);
            }
        }

        generateLevel();

    </script>
</body>
</html>
